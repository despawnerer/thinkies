{% extends 'base.html' %}

{% load i18n %}

{% block title %}{% trans "Settings â€” Thinkies" %}{% endblock %}
{% block search %}{% endblock %}

{% block content %}
<article id="settings">
    <h1>{% trans "Settings" %}</h1>

    {% if identities|length > 1 %}
    <section>
        <h2>{% trans "Post as" %}</h2>
        <ul class="identity-list">
            {% for identity, widget in identity_widgets %}
            <li>
                <label class="identity-label" for="{{ widget.id_for_label }}">
                    {{ widget.tag }}

                    <span class="icon-{{ identity.provider }} brand-icon"></span>

                    <span class="user-picture">
                        <img src="{{ identity.image.url }}" alt="{{ identity.name }}"/>
                    </span>

                    {{ identity.name }}
                </label>
            </li>
            {% endfor %}
        </ul>
    </section>
    {% endif %}

    <section>
    <h2>{% trans "Accounts" %}</h2>
        <ul class="account-list">
            {% for provider in auth_providers %}
            <li>
                {% if not provider.is_associated %}
                    <label class="account-label">{{ provider.verbose_name }}</label>
                    <a href="{% url 'social:begin' backend=provider.backend_name %}?next={{ request.get_full_path|urlencode }}" class="button brand-button {{ provider.backend_name }}">
                        <span class="brand-icon icon-{{ provider.name }}"></span>
                        {% trans "Connect" %}
                    </a>
                {% elif identities|length > 1 %}
                    <form action="{% url 'social:disconnect' backend=provider.backend_name %}" method="post">
                        {% csrf_token %}
                        <input type="hidden" name="next" value="{{ request.get_full_path }}"/>
                        <label class="account-label">{{ provider.verbose_name }}</label>
                        <button class="button {{ provider.name }}-button">
                        {% trans "Disconnect" %}
                        </button>
                    </form>
                {% else %}
                    <label class="account-label">{{ provider.verbose_name }}</label>
                    {% trans "logged in" %}
                {% endif %}
            </li>
            {% endfor %}
        </ul>
    </section>
</article>
{% endblock %}

